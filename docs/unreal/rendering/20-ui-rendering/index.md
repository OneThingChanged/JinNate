# Ch.20 UI 렌더링

Slate와 UMG 기반의 UI 렌더링 시스템을 분석합니다.

---

## 개요

```
┌─────────────────────────────────────────────────────────────────┐
│                      UI 렌더링 시스템                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    UI Rendering Pipeline                 │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │                                                          │   │
│  │  Widget          Layout           Paint           Render │   │
│  │  Construct   →   Pass        →    Pass       →   Batch  │   │
│  │                                                          │   │
│  │  • Hierarchy     • Measure        • Draw         • Merge │   │
│  │  • Properties    • Arrange        • Cache        • Submit│   │
│  │  • Bindings      • Transform      • Layer        • GPU   │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  핵심 구성 요소:                                                │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │ Slate        │  │ UMG          │  │ Render       │         │
│  │ Framework    │  │ System       │  │ Backend      │         │
│  ├──────────────┤  ├──────────────┤  ├──────────────┤         │
│  │ • SWidget    │  │ • UWidget    │  │ • Batching   │         │
│  │ • SPanel     │  │ • Blueprint  │  │ • Atlasing   │         │
│  │ • Slots      │  │ • Animation  │  │ • Materials  │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 핵심 주제

### [1. Slate 프레임워크](01-slate-framework.md)
- Slate 아키텍처
- SWidget 계층 구조
- 레이아웃 시스템
- 입력 처리

### [2. UMG 시스템](02-umg-system.md)
- UMG 아키텍처
- Widget Blueprint
- 애니메이션 시스템
- 데이터 바인딩

### [3. UI 렌더링 파이프라인](03-ui-rendering-pipeline.md)
- 렌더링 패스
- Element Batching
- Draw Command 생성
- RHI 통합

### [4. UI 머티리얼과 이펙트](04-ui-materials.md)
- UI 머티리얼
- 포스트 프로세스 효과
- 블러와 마스킹
- 커스텀 셰이더

### [5. UI 최적화](05-ui-optimization.md)
- 배칭 최적화
- Invalidation Box
- Retainer Box
- 프로파일링

---

## 렌더링 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                   UI Rendering Architecture                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Application Layer:                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  User Interface Definition                               │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │   │
│  │  │ UMG Widget  │  │ Widget      │  │ C++ Slate   │      │   │
│  │  │ Blueprint   │  │ Designer    │  │ Code        │      │   │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘      │   │
│  │         └────────────────┼────────────────┘              │   │
│  └──────────────────────────┼───────────────────────────────┘   │
│                             ▼                                   │
│  Slate Framework:                                               │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Widget Tree Management                                  │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │   │
│  │  │ Tick    │→ │ Layout  │→ │ Paint   │→ │ Cache   │    │   │
│  │  │ Widgets │  │ Pass    │  │ Pass    │  │ Update  │    │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │   │
│  └──────────────────────────┼───────────────────────────────┘   │
│                             ▼                                   │
│  Rendering Backend:                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  FSlateRenderer                                          │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │   │
│  │  │ Element │→ │ Batch   │→ │ RHI     │→ │ GPU     │    │   │
│  │  │ Collect │  │ Merge   │  │ Submit  │  │ Render  │    │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Slate vs UMG

```
┌─────────────────────────────────────────────────────────────────┐
│                    Slate vs UMG 비교                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────┐  ┌─────────────────────────┐      │
│  │         Slate           │  │          UMG            │      │
│  ├─────────────────────────┤  ├─────────────────────────┤      │
│  │                         │  │                         │      │
│  │  • C++ 기반             │  │  • Blueprint 기반       │      │
│  │  • 에디터 UI            │  │  • 게임 UI              │      │
│  │  • 고성능               │  │  • 비주얼 디자인        │      │
│  │  • 직접 제어            │  │  • 애니메이션 지원      │      │
│  │  • 저수준 접근          │  │  • 이벤트 바인딩        │      │
│  │                         │  │                         │      │
│  │  사용 사례:             │  │  사용 사례:             │      │
│  │  ┌───────────────────┐ │  │  ┌───────────────────┐  │      │
│  │  │ • 에디터 창        │ │  │  │ • HUD             │  │      │
│  │  │ • 도구 패널        │ │  │  │ • 메뉴 시스템     │  │      │
│  │  │ • 프로퍼티 뷰      │ │  │  │ • 인벤토리        │  │      │
│  │  │ • 커스텀 에디터    │ │  │  │ • 대화 시스템     │  │      │
│  │  └───────────────────┘ │  │  └───────────────────┘  │      │
│  │                         │  │                         │      │
│  └─────────────────────────┘  └─────────────────────────┘      │
│                                                                 │
│                         ▼                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              공통 렌더링 백엔드 (FSlateRenderer)          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 주요 클래스

| 클래스 | 역할 |
|--------|------|
| `SWidget` | Slate 위젯 기본 클래스 |
| `SCompoundWidget` | 복합 위젯 기본 클래스 |
| `UWidget` | UMG 위젯 기본 클래스 |
| `UUserWidget` | 사용자 정의 위젯 |
| `FSlateApplication` | Slate 애플리케이션 관리 |
| `FSlateRenderer` | UI 렌더링 백엔드 |
| `FSlateDrawElement` | 개별 드로우 엘리먼트 |
| `FSlateRHIRenderer` | RHI 기반 렌더러 |

---

## 참고 자료

- [Slate UI Framework](https://docs.unrealengine.com/slate-ui/)
- [UMG UI Designer](https://docs.unrealengine.com/umg/)
- [UI Best Practices](https://docs.unrealengine.com/ui-optimization/)

# Ch.21 최적화 기법 종합

렌더링 성능 최적화의 종합적인 기법과 실전 전략을 다룹니다.

---

## 개요

```
┌─────────────────────────────────────────────────────────────────┐
│                    최적화 기법 종합                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                 Optimization Pipeline                    │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │                                                          │   │
│  │  Profile      Identify       Apply          Validate    │   │
│  │  & Measure →  Bottleneck →   Solution   →   Results     │   │
│  │                                                          │   │
│  │  • Insights   • CPU/GPU      • Technique    • Benchmark │   │
│  │  • Stats      • Memory       • Tradeoff     • A/B Test  │   │
│  │  • Capture    • Bandwidth    • Platform     • Iterate   │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  최적화 영역:                                                   │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │ Rendering    │  │ Asset        │  │ Memory       │         │
│  │ Pipeline     │  │ Optimization │  │ Management   │         │
│  ├──────────────┤  ├──────────────┤  ├──────────────┤         │
│  │ • Draw Calls │  │ • LOD        │  │ • Streaming  │         │
│  │ • Shaders    │  │ • Textures   │  │ • Pooling    │         │
│  │ • Culling    │  │ • Meshes     │  │ • Budget     │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 핵심 주제

### [1. 렌더링 파이프라인 최적화](01-rendering-pipeline.md)
- 드로우콜 최적화
- 셰이더 복잡도 관리
- 오클루전 컬링
- 배칭 전략

### [2. 에셋 최적화](02-asset-optimization.md)
- LOD 시스템
- 텍스처 최적화
- 메시 최적화
- 머티리얼 인스턴싱

### [3. 메모리 및 스트리밍](03-memory-streaming.md)
- 메모리 버짓 관리
- 텍스처 스트리밍
- 레벨 스트리밍
- 오브젝트 풀링

### [4. 플랫폼별 최적화](04-platform-optimization.md)
- PC 최적화
- 콘솔 최적화
- 모바일 최적화
- 크로스 플랫폼 전략

### [5. 프로파일링 실전](05-profiling-practice.md)
- Unreal Insights
- GPU 프로파일러
- 벤치마킹 방법론
- 성능 회귀 방지

---

## 최적화 워크플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                 Optimization Workflow                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 성능 목표 설정                                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Target FPS: 60 (16.67ms)                                │   │
│  │  ├── CPU Budget: 10ms                                    │   │
│  │  ├── GPU Budget: 14ms                                    │   │
│  │  └── Memory Budget: 4GB                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  2. 프로파일링 및 병목 식별                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐                  │   │
│  │  │ Unreal  │  │ GPU     │  │ Memory  │                  │   │
│  │  │ Insights│  │ Profiler│  │ Profiler│                  │   │
│  │  └────┬────┘  └────┬────┘  └────┬────┘                  │   │
│  │       └────────────┼────────────┘                        │   │
│  │                    ▼                                     │   │
│  │            Bottleneck Identified                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  3. 최적화 적용                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │   │
│  │  │ Quick Wins  │  │ Medium      │  │ Long-term   │      │   │
│  │  │ (Settings)  │  │ (Assets)    │  │ (Code)      │      │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  4. 검증 및 반복                                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Benchmark → Compare → Iterate → Document                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 성능 버짓

```
┌─────────────────────────────────────────────────────────────────┐
│                    Performance Budget                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  60 FPS Target (16.67ms per frame):                             │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                          │   │
│  │  CPU Frame Budget: 10ms                                  │   │
│  │  ├── Game Thread: 6ms                                    │   │
│  │  │   ├── Tick: 2ms                                       │   │
│  │  │   ├── Physics: 2ms                                    │   │
│  │  │   └── Animation: 2ms                                  │   │
│  │  └── Render Thread: 4ms                                  │   │
│  │      ├── Visibility: 1ms                                 │   │
│  │      ├── Draw Setup: 2ms                                 │   │
│  │      └── RHI Submit: 1ms                                 │   │
│  │                                                          │   │
│  │  GPU Frame Budget: 14ms                                  │   │
│  │  ├── Base Pass: 3ms                                      │   │
│  │  ├── Lighting: 4ms                                       │   │
│  │  ├── Shadows: 2ms                                        │   │
│  │  ├── Post Process: 2ms                                   │   │
│  │  ├── Translucency: 2ms                                   │   │
│  │  └── UI: 1ms                                             │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  30 FPS Target (33.33ms): 버짓 2배                              │
│  120 FPS Target (8.33ms): 버짓 절반                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 주요 최적화 전략

| 영역 | 전략 | 효과 |
|------|------|------|
| Draw Calls | 인스턴싱, 머지, 배칭 | CPU 부하 감소 |
| Triangles | LOD, Nanite, 컬링 | GPU 부하 감소 |
| Shaders | 복잡도 감소, 분기 제거 | GPU 부하 감소 |
| Textures | 압축, 스트리밍, 아틀라스 | 메모리/대역폭 감소 |
| Lighting | 베이킹, 프록시, 거리 컬링 | CPU/GPU 부하 감소 |
| Shadows | 캐스케이드, 거리 페이드, 캐싱 | GPU 부하 감소 |
| Post Process | 해상도, 패스 병합 | GPU 부하 감소 |
| UI | 캐싱, 배칭, 가시성 | CPU/GPU 부하 감소 |

---

## 주요 콘솔 명령어

| 명령어 | 설명 |
|--------|------|
| `stat fps` | FPS 및 프레임 시간 |
| `stat unit` | Game/Render/GPU 스레드 시간 |
| `stat gpu` | GPU 패스별 시간 |
| `stat scenerendering` | 렌더링 상세 통계 |
| `stat rhi` | RHI 통계 |
| `profilegpu` | GPU 프로파일 캡처 |
| `stat memory` | 메모리 사용량 |
| `stat streaming` | 스트리밍 통계 |

---

## 참고 자료

- [Performance Guidelines](https://docs.unrealengine.com/performance-guidelines/)
- [Profiling and Optimization](https://docs.unrealengine.com/profiling/)
- [Scalability Reference](https://docs.unrealengine.com/scalability/)

# Ch.12 Mobile Rendering

모바일 플랫폼의 특성과 UE 모바일 렌더링 시스템을 분석합니다.

---

## 개요

모바일 디바이스는 데스크톱 대비 전력, 발열, 성능 면에서 특별한 제약이 있습니다. UE는 이러한 제약 하에서 최적의 렌더링 품질을 제공하기 위해 전용 모바일 렌더러를 구현합니다.

```
┌─────────────────────────────────────────────────────────────────┐
│                    모바일 렌더링 아키텍처                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                  FMobileSceneRenderer                    │   │
│  └───────────────────────┬─────────────────────────────────┘   │
│                          │                                      │
│            ┌─────────────┴─────────────┐                       │
│            ▼                           ▼                       │
│  ┌─────────────────┐         ┌─────────────────┐              │
│  │  Forward Path   │         │  Deferred Path  │              │
│  │  (ES 3.1/Vulkan)│         │  (UE 4.26+)     │              │
│  └────────┬────────┘         └────────┬────────┘              │
│           │                           │                        │
│           ▼                           ▼                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                 TBDR GPU Architecture                    │   │
│  │  (Tile-Based Deferred Rendering)                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 모바일 디바이스 제약

| 제약 요소 | 설명 |
|----------|------|
| **전력** | 5W 이하 제한, 배터리 및 발열 관리 |
| **성능** | PC 대비 CPU/GPU 성능 수십 배 낮음 |
| **대역폭** | 메모리 대역폭 제한 |
| **발열** | 수동 냉각만 가능, 열 스로틀링 |
| **아키텍처** | TBDR 기반 타일 렌더링 |

---

## UE 모바일 렌더링 8대 기능

```
┌─────────────────────────────────────────────────────────────────┐
│                    UE 모바일 렌더링 기능                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Feature Level     │ ES 3.1, Vulkan, Metal 2.0 지원         │
│  ─────────────────────┼────────────────────────────────────────│
│  2. Deferred Shading  │ UE 4.26+, r.Mobile.ShadingPath=1       │
│  ─────────────────────┼────────────────────────────────────────│
│  3. GTAO              │ Ground Truth Ambient Occlusion         │
│  ─────────────────────┼────────────────────────────────────────│
│  4. Dynamic Lighting  │ 1 Directional + CSM, 4 Point, 4 Spot   │
│  ─────────────────────┼────────────────────────────────────────│
│  5. PPR               │ Pixel Projected Reflection             │
│  ─────────────────────┼────────────────────────────────────────│
│  6. Auto-Instancing   │ GPU Scene (r.Mobile.SupportGPUScene=1) │
│  ─────────────────────┼────────────────────────────────────────│
│  7. Post Processing   │ Bloom, TAA (Mobile HDR 필요)           │
│  ─────────────────────┼────────────────────────────────────────│
│  8. Material          │ BaseColor, Roughness, Metallic, Normal │
│                       │ 최대 16 Texture Sampler                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## TBDR 아키텍처

모바일 GPU는 **타일 기반 렌더링**을 사용하여 대역폭과 전력을 절약합니다.

```
┌─────────────────────────────────────────────────────────────────┐
│                    TBDR 처리 단계                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Binning Pass                                                │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ • 지오메트리를 타일 단위로 분류                       │    │
│     │ • 화면을 16x16 또는 32x32 타일로 분할                │    │
│     │ • 각 삼각형이 어느 타일에 영향을 주는지 기록         │    │
│     └─────────────────────────────────────────────────────┘    │
│                           ▼                                     │
│  2. Rendering Pass                                              │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ • 타일별로 On-Chip 메모리에서 렌더링                 │    │
│     │ • HSR로 가려진 픽셀 제거                             │    │
│     │ • 셰이딩은 보이는 픽셀만 수행                        │    │
│     └─────────────────────────────────────────────────────┘    │
│                           ▼                                     │
│  3. Resolve Pass                                                │
│     ┌─────────────────────────────────────────────────────┐    │
│     │ • 타일 데이터를 시스템 메모리에 기록                 │    │
│     │ • 압축 적용 (AFBC, UBWC)                            │    │
│     └─────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 문서 구성

| 문서 | 내용 |
|------|------|
| [모바일 렌더링 개요](01-mobile-overview.md) | 디바이스 특성, 제약, 아키텍처 |
| [UE 모바일 기능](02-mobile-features.md) | 8가지 핵심 기능 상세 |
| [Forward 렌더링](03-forward-rendering.md) | Forward 파이프라인 분석 |
| [Deferred 렌더링](04-deferred-rendering.md) | 모바일 Deferred 구현 |
| [모바일 최적화](05-mobile-optimization.md) | TBDR 최적화, 셰이더 최적화 |

---

## 참고 자료

- [원본 문서 Part 1 (timlly)](https://www.cnblogs.com/timlly/p/15511402.html)
- [원본 문서 Part 2 (timlly)](https://www.cnblogs.com/timlly/p/15546797.html)
- [원본 문서 Part 3 (timlly)](https://www.cnblogs.com/timlly/p/15574911.html)
- [UE 공식 문서 - Mobile](https://docs.unrealengine.com/5.0/en-US/mobile-rendering-in-unreal-engine/)
